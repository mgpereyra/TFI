@model IEnumerable<Proyecto.Database.Service>

@{
    ViewBag.Title = "Rutas";
}


<div class="d-flex mb-4">
    <div class="pb-lg-2 w-100">
        <h2><i class="fa fa-hands-helping pt-2 mr-2" aria-hidden="true"></i>Rutas</h2>
    </div>
    <div class="flex-shrink-1"> <a class="btn btn-primary m-2" href="Create"><i class="fa fa-plus-circle"></i>Crear nuevo</a></div>
</div>

<div class="row">

    <div class="col-sm-5">
        <div class="card text-white bg-dark">
            <div class="card-body" id="map_canvas">






            </div>
        </div>
    </div>

    <div class="col-sm-7">
        <div class="card text-white bg-dark">
            <div class="card-body">
                <table class="table table-striped table-dark table-responsive">
                    <thead class="font-weight-bold text-uppercase">
                        <tr class="border-bottom border-primary">
                            <td width="40%">Nombre</td>
                            <td width="50%">Dirección</td>
                            <td>Estado</td>
                        <tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>@item.Id</td>
                                <td>@item.Title</td>
                                <td>ch</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>





@section Scripts {
    @Scripts.Render("~/bundles/jquery")
}



<style>

    #map_canvas {
        height: 400px;
    }
</style>

<script async
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD63Ptld6R6m6o8p3HkX9an3ksAw_faFBs&callback=initMap">
</script>

<script>
   // var marcadores = @Html.Raw(Json.Encode(Model));

    var marcadores = [
        {
            Titulo: "Buenos Aires", Lat : -34.6158037, Lng : -58.5033386
        },
        { Titulo: "San Pablo", Lat: -34.8208575, Lng: -56.3765241 },
        { Titulo: "Montevideo", Lat: -23.6821604, Lng: -46.8754923 },
    ];
    console.log(marcadores);

       let map;
    function initMap() {
                   const myLatLng = { lat: -25.363, lng: 131.044 };

                  map = new google.maps.Map(document.getElementById("map_canvas"), {
                    center: { lat: -34.397, lng: -58.503},
                    zoom: 8,
                  });
                 new google.maps.Marker({
                     position: myLatLng ,
                    map,
                    title: "Hello World!",
                  });
            }
    (function() {
   // your page initialization code here
   // the DOM will be available here


            // map options
           /* var options = {
                zoom: 5,
                center: new google.maps.LatLng(-30.7369959, -58.7870258),
                mapTypeId: google.maps.MapTypeId.TERRAIN,
                mapTypeControl: false
            };*/

            // init map
            //var map = new google.maps.Map(document.getElementById('map_canvas'), options);



            var bounds = new google.maps.LatLngBounds();

            for (var i = 0; i < marcadores.length; i++) {
                // init markers
                var marker = new google.maps.Marker({
                    position: new google.maps.LatLng(marcadores[i].Lat, marcadores[i].Lng),
                    map: map,
                    title: marcadores[i].Titulo
                });

                var myPlace = new google.maps.LatLng(marcadores[i].Lat, marcadores[i].Lng);

                bounds.extend(myPlace);

                // process multiple info windows
                (function(marker, i) {
                    // add click event
                    google.maps.event.addListener(marker, 'click', function() {
                        infowindow = new google.maps.InfoWindow({
                            content: marcadores[i].Titulo
                        });
                        infowindow.open(map, marker);
                    });
                })(marker, i);
            }

            map.fitBounds(bounds);

        })();

</script>


<script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>

<!--TODO: Add SDKs for Firebase products that you want to use
https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-analytics.js"></script>

<script src="~/Scripts/Firebase/database.js"></script>


